var Layout=function(){var i="admin/layout3/img/";var e="admin/layout3/css/";var d=Malcolm.getResponsiveBreakpoint("md");var c=function(){$(".page-header").on("click",".search-form",function(j){$(this).addClass("open");$(this).find(".form-control").focus();$(".page-header .search-form .form-control").on("blur",function(k){$(this).closest(".search-form").removeClass("open");$(this).unbind("blur")})});$(".page-header").on("keypress",".hor-menu .search-form .form-control",function(j){if(j.which==13){$(this).closest(".search-form").submit();return false}});$(".page-header").on("mousedown",".search-form.open .submit",function(j){j.preventDefault();j.stopPropagation();$(this).closest(".search-form").submit()});$("body").on("click",".page-header-top-fixed .page-header-top .menu-toggler",function(){Malcolm.scrollTop()})};var b=function(){$(".page-header .menu-toggler").on("click",function(j){if(Malcolm.getViewPort().width<d){var k=$(".page-header .page-header-menu");if(k.is(":visible")){k.slideUp(300)}else{k.slideDown(300)}if($("body").hasClass("page-header-top-fixed")){Malcolm.scrollTop()}}});$(".hor-menu .dropdown-submenu > a").on("click",function(j){if(Malcolm.getViewPort().width<d){if($(this).next().hasClass("dropdown-menu")){j.stopPropagation();if($(this).parent().hasClass("open")){$(this).parent().removeClass("open");$(this).next().hide()}else{$(this).parent().addClass("open");$(this).next().show()}}}});if(Malcolm.getViewPort().width>=d){$('.hor-menu [data-hover="megamenu-dropdown"]').not(".hover-initialized").each(function(){$(this).dropdownHover();$(this).addClass("hover-initialized")})}$(document).on("click",'.hor-menu .menu-dropdown > a[data-hover="megamenu-dropdown"]',function(){if(Malcolm.getViewPort().width<d){Malcolm.scrollTo($(this))}});$(document).on("click",".mega-menu-dropdown .dropdown-menu, .classic-menu-dropdown .dropdown-menu",function(j){j.stopPropagation()});$(window).scroll(function(){var j=75;if($("body").hasClass("page-header-menu-fixed")){if($(window).scrollTop()>j){$(".page-header-menu").addClass("fixed")}else{$(".page-header-menu").removeClass("fixed")}}if($("body").hasClass("page-header-top-fixed")){if($(window).scrollTop()>j){$(".page-header-top").addClass("fixed")}else{$(".page-header-top").removeClass("fixed")}}})};var h=function(m,k){var j=location.hash.toLowerCase();var l=$(".hor-menu");if(m==="click"||m==="set"){k=$(k)}else{if(m==="match"){l.find("li > a").each(function(){var n=$(this).attr("href").toLowerCase();if(n.length>1&&j.substr(1,n.length-1)==n.substr(1)){k=$(this);return}})}}if(!k||k.size()==0){return}if(k.attr("href").toLowerCase()==="javascript:;"||k.attr("href").toLowerCase()==="#"){return}l.find("li.active").removeClass("active");l.find("li > a > .selected").remove();l.find("li.open").removeClass("open");k.parents("li").each(function(){$(this).addClass("active");if($(this).parent("ul.navbar-nav").size()===1){$(this).find("> a").append('<span class="selected"></span>')}})};var a=function(){var j=Malcolm.getViewPort().width;var k=$(".page-header-menu");if(j>=d&&k.data("breakpoint")!=="desktop"){$('.hor-menu [data-toggle="dropdown"].active').removeClass("open");k.data("breakpoint","desktop");$('.hor-menu [data-hover="megamenu-dropdown"]').not(".hover-initialized").each(function(){$(this).dropdownHover();$(this).addClass("hover-initialized")});$(".hor-menu .navbar-nav li.open").removeClass("open");$(".page-header-menu").css("display","block")}else{if(j<d&&k.data("breakpoint")!=="mobile"){$('.hor-menu [data-toggle="dropdown"].active').addClass("open");k.data("breakpoint","mobile");$('.hor-menu [data-hover="megamenu-dropdown"].hover-initialized').each(function(){$(this).unbind("hover");$(this).parent().unbind("hover").find(".dropdown-submenu").each(function(){$(this).unbind("hover")});$(this).removeClass("hover-initialized")})}else{if(j<d){}}}};var g=function(){var j;if($("body").height()<Malcolm.getViewPort().height){j=Malcolm.getViewPort().height-$(".page-header").outerHeight()-($(".page-container").outerHeight()-$(".page-content").outerHeight())-$(".page-prefooter").outerHeight()-$(".page-footer").outerHeight();$(".page-content").css("min-height",j)}};var f=function(){var k=100;var j=500;if(navigator.userAgent.match(/iPhone|iPad|iPod/i)){$(window).bind("touchend touchcancel touchleave",function(l){if($(this).scrollTop()>k){$(".scroll-to-top").fadeIn(j)}else{$(".scroll-to-top").fadeOut(j)}})}else{$(window).scroll(function(){if($(this).scrollTop()>k){$(".scroll-to-top").fadeIn(j)}else{$(".scroll-to-top").fadeOut(j)}})}$(".scroll-to-top").click(function(l){l.preventDefault();$("html, body").animate({scrollTop:0},j);return false})};return{initHeader:function(){c();b();Malcolm.addResizeHandler(a);if(Malcolm.isAngularJsApp()){h("match")}},initContent:function(){g()},initFooter:function(){f()},init:function(){this.initHeader();this.initContent();this.initFooter()},setMainMenuActiveLink:function(k,j){h(k,j)},closeMainMenu:function(){$(".hor-menu").find("li.open").removeClass("open");if(Malcolm.getViewPort().width<d&&$(".page-header-menu").is(":visible")){$(".page-header .menu-toggler").click()}},getLayoutImgPath:function(){return Malcolm.getAssetsPath()+i},getLayoutCssPath:function(){return Malcolm.getAssetsPath()+e}}}();